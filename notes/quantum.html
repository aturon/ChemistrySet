<html> 
        <head> 
                <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"> 
                <title>JavaScript Surface Plot</title> 
                

                <!--[if IE]><script type="text/javascript" src="http://surface-plot.googlecode.com/svn/trunk/javascript/excanvas.js"></script><![endif]--> 
				<script type="text/javascript" src='jsplot/SurfacePlot.js'></script> 
				<script type="text/javascript" src='jsplot/ColourGradient.js'></script> 
                <script type="text/javascript" src="http://www.google.com/jsapi"></script> 
        </head>
<body>
		
    <script type='text/javascript'>
			
      google.load("visualization", "1");
      google.setOnLoadCallback(setUp);
			
        function isIE() {
          return /msie/i.test(navigator.userAgent) && !/opera/i.test(navigator.userAgent);
        }
	
        function setUp() {
          var numRows = 13;
          var numCols = 8;
				
          var tooltipStrings = new Array();
          var data = new google.visualization.DataTable();
				
          for (var i = 0; i < numCols; i++)
          {
            data.addColumn('number', 'col'+i);
          }
				
          data.addRows(numRows);
          var idx = 0;          

var bench = [
[1,0.446679609797978,0.596570709528704,0.506585097296153,0.509964193946072,0.466534471041524,0.50391641957898,0.45713651433046],
[1,0.522917261154991,0.496892107095632,0.416450503142935,0.420561122062952,0.372393024183722,0.370281782735673,0.382789861443526],
[1,0.521785008779627,0.470890129716261,0.430829626675303,0.396016573130018,0.365407688355972,0.336073038855353,0.327316908869702],
[1,0.592890914677435,0.567248661847004,0.491537162701476,0.441684425148784,0.385181255238382,0.352260299649597,0.376166860017395],
[1,0.736266010831031,0.708961600567468,0.660213500563397,0.581814717480725,0.501839075438144,0.465045394268833,0.425311544456865],
[1,0.801296677056021,0.831822845731968,0.850946599721151,0.80622319531582,0.680566218415117,0.637798435159562,0.526530618550436],
[1,0.877928136336907,0.88495223645327,0.905365677758114,0.883161419353173,0.862014309861295,0.858794559557807,0.749362677904537],
[1,0.934331713676584,0.941222733719646,0.93517760787223,0.922893730475963,0.925443878217155,0.89807539417048,0.876355326087081],
[1,0.959248408290133,0.962365829028807,0.969815049756986,0.943560880962277,0.946714028469733,0.84250243098748,0.844883677361534],
[1,0.978491276820324,0.979562500371172,0.97386035813863,0.954180356538964,0.948757335697891,0.913905658491598,0.926690956473303],
[1,0.986905145489024,0.986165492774191,0.986464507979383,0.957280437930748,0.924519807536308,0.94089806432558,0.903122575882577],
[1,0.992910192726192,0.956466271776725,0.952790221785446,0.86220294829473,0.95997708957151,0.924104286812228,0.875180072835127],
[1,0.995819369107507,0.995838399073978,0.995199891007479,0.962959275026664,0.963302673366725,0.96131344973565,0.923453512299702]
];

          var work = [10,18,32,56,100,178,316,562,1000,1778,3162,5623,10000]

          var max = 0
          var min = 100000
          for (var i = 0; i < numRows; i++) {	
	    for (var j = 0; j < numCols; j++) {
	      if (bench[i][j] > max) max = bench[i][j]	
	      if (bench[i][j] < min) min = bench[i][j]	
            }
          }
			
          for (var i = 0; i < numRows; i++) {	
	    for (var j = 0; j < numCols; j++) {
//	      data.setValue(i, j, (bench[i][j] - min)/(max - min));		
	      data.setValue(i, j, bench[i][j]);
	      tooltipStrings[idx] = "w:" + work[i] + ", threads:" + j + " = " + bench[i][j];
	      idx++;
	    }
          }

         var surfacePlot = new greg.ross.visualisation.SurfacePlot(document.getElementById("surfacePlotDiv"));

         // Don't fill polygons in IE. It's too slow.
         var fillPly = !isIE();
//	 var fillPly = false;

         // Define a colour gradient.
         var colour1 = {red:0, green:0, blue:255};
         var colour2 = {red:0, green:255, blue:255};
         var colour3 = {red:0, green:255, blue:0};
         var colour4 = {red:255, green:255, blue:0};
         var colour5 = {red:255, green:0, blue:0};
//         var colours = [colour1, colour2, colour3, colour4, colour5];
         var colours = [colour5, colour4, colour3, colour2, colour1];

         // Axis labels.
         var xAxisHeader = "Work between critical sections";
         var yAxisHeader = "Threads";
         var zAxisHeader = "Speedup as % of predicted";

         var options = {xPos: 0, yPos: 0, width: 800, height: 800, colourGradient: colours,
		   fillPolygons: fillPly, tooltips: tooltipStrings, xTitle: xAxisHeader,
		   yTitle: yAxisHeader, zTitle: zAxisHeader};
				
        surfacePlot.draw(data, options);
      }
			
      </script>
		
    Observed speedup as a percentage of naively predicted speedup.  Work
    quantity is log scale.  Drag to rotate.

    <p>

      <div id='surfacePlotDiv' style='align:center;'>
        <!-- SurfacePlot goes here... -->
			
      </div>
		
    </body>
</html>
